<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zimax.components.coframe.dict.mapper.DictMapper">
    <!--添加字典类型-->
    <select id="saveDictType" parameterType="com.zimax.components.coframe.dict.pojo.DictType">
        insert into dict_type
        values (#{dictTypeId}, #{dictTypeName}, #{rank}, #{parentId}, #{seqNo})
    </select>
    <!--添加字典项-->
    <select id="saveDict" parameterType="com.zimax.components.coframe.dict.pojo.DictType">
        insert into dict_entry
        values (#{dictTypeId}, #{dictId}, #{dictName}, #{status}, #{sortNo},#{rank}, #{parentId}, #{seqNo}, #{filter1}, #{filter2})
    </select>

    <!--查询字典类型记录数-->
    <select id="countType" resultType="int">
        select count(*) from dict_type
        <where>
            <if test="dictTypeId !=null and dictTypeId !=''">
                and dict_type_id like '%${dictTypeId}%'
            </if>
            <if test="dictTypeName !=null and dictTypeName !=''">
                and dict_type_name like '%${dictTypeName}%'
            </if>
        </where>
    </select>
    <select id="queryDictTypes" resultType="com.zimax.components.coframe.dict.pojo.DictType">
        select * from dict_type
        <where>
            <if test="dictTypeId !=null and dictTypeId !=''">
                and dict_type_id like '%${dictTypeId}%'
            </if>
            <if test="dictTypeName !=null and dictTypeName !=''">
                and dict_type_name like '%${dictTypeName}%'
            </if>
        </where>
        <if test="order !=null and order !=''">
            order by ${field} ${order}
        </if>
        <if test="limit !=null and limit !=''">
            limit ${begin},${limit}
        </if>
    </select>

    <!--查询字典项记录数-->
    <select id="count" resultType="int">
        select count(*) from dict_entry
        <where>
            <if test="dictTypeId !=null and dictTypeId !=''">
                and dict_type_id like '%${dictTypeId}%'
            </if>
            <if test="dictId !=null and dictId !=''">
                and dict_id like '%${dictId}%'
            </if>
            <if test="parentId !=null and parentId !=''">
                and parent_id like '%${parentId}%'
            </if>
        </where>
    </select>
    <select id="queryDicts" resultType="com.zimax.components.coframe.dict.pojo.DictEntry">
        select count(*) from dict_entry
        <where>
        <if test="dictTypeId !=null and dictTypeId !=''">
            and dict_type_id like '%${dictTypeId}%'
        </if>
        <if test="dictId !=null and dictId !=''">
            and dict_id like '%${dictId}%'
        </if>
        <if test="parentId !=null and parentId !=''">
            and parent_id like '%${parentId}%'
        </if>
        <if test="order !=null and order !=''">
            order by ${field} ${order}
        </if>
        <if test="limit !=null and limit !=''">
            limit ${begin},${limit}
        </if>
        </where>
    </select>

    <!--更新-->
    <update id="updateDictType" parameterType="com.zimax.components.coframe.dict.pojo.DictType">
        UPDATE dict_type
        SET dict_type_name   = #{dictTypeName},
            rank     = #{rank},
            parent_id = #{parentId},
            seq_no  = #{seqNo}
        WHERE operator_id = #{dictTypeId}
    </update>

    <update id="updateDict" parameterType="com.zimax.components.coframe.dict.pojo.DictEntry">
        UPDATE dict_entry
        SET dict_type_id   = #{dictTypeId},
            dict_name     = #{dictName},
            status = #{status},
            sort_no  = #{sortNo},
            rank     = #{rank},
            parent_id = #{parentId},
            seq_no  = #{seqNo},
            filter1 = #{filter1},
            filter2  = #{filter2}
        WHERE dict_id = #{dictId}
    </update>
    <!--    主键删除-->
    <delete id="removeDictType" parameterType="int">
        delete from dict_type
        where dict_type_id = #{dictTypeId}
    </delete>
    <!--    主键删除-->
    <delete id="removeDict" parameterType="int">
        delete from dict_entry
        where dict_id = #{dictId}
    </delete>

    <!--    批量删除-->
    <delete id="deleteDictTypes" parameterType="java.util.List">
        delete from dict_type where dictTypeIds in
        <foreach collection="list" item="id" separator="," open="(" close=")">
            #{id}
        </foreach>
    </delete>

    <!--    批量删除-->
    <delete id="deleteDicts" parameterType="java.util.List">
        delete from dict_entry where dictId in
        <foreach collection="list" item="id" separator="," open="(" close=")">
            #{id}
        </foreach>
    </delete>

    <!--获取信息-->
    <select id="getDictType" resultType="com.zimax.components.coframe.dict.pojo.DictType">
        select *
        from dict_type
        where dict_type_id = #{dictTypeIds}
    </select>

    <!--获取信息-->
    <select id="getDict" resultType="com.zimax.components.coframe.dict.pojo.DictEntry">
        select *
        from dict_entry
        where dict_id = #{dictId}
    </select>

    <select id="importDict" parameterType="com.zimax.components.coframe.dict.pojo.DictType">

    </select>
    <select id="exportDict" resultType="com.zimax.components.coframe.dict.pojo.DictEntry">

    </select>
</mapper>    